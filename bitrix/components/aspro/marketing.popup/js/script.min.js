window.appAspro=window.appAspro||{},window.appAspro.marketing||(window.appAspro.marketing={inited:!1,showPopup:function(t=""){let a=$(".dyn_mp_jqm"+(t?'[data-js-action="leave"]':":not([data-js-action])"));if(a.length){var e=[];a.each((function(t,a){var o=$(a),n=0;if(!o.hasClass("initied")){for(o.addClass("initied"),o.data("param-delay")&&(n=1e3*o.data("param-delay"));-1!==e.indexOf(n);)n+=100;if(e.push(n),"undefined"!=typeof localStorage){let t=o.data("ls");var i=localStorage.getItem(t),s="";try{s=JSON.parse(i)}catch(t){s=i}let a=!0;try{let t=o.data("media-query");t&&(matchMedia(t).matches||(a=!1))}catch(t){}a&&(!s||s&&("Y"===s.SHOW_ALWAYS||s.TIMESTAMP<Date.now()&&s.TIMESTAMP))&&(timeoutID=setTimeout((function(){o.click()}),n)),s&&"N"===s.SHOW_ALWAYS&&s.TIMESTAMP<Date.now()&&s.TIMESTAMP&&(s.SHOW_ALWAYS="Y",localStorage.setItem(t,JSON.stringify(s)))}else{(s=$.cookie(o.data("ls")))||(timeoutID=setTimeout((function(){o.click()}),n))}}}))}},stopShowAlways:function(t){if("undefined"!=typeof localStorage){let a=localStorage.getItem(t),e="";try{e=JSON.parse(a)}catch(t){e=a}e&&(e.SHOW_ALWAYS="N",localStorage.setItem(t,JSON.stringify(e)))}},checkStopAction:function(t,a){let e=$(".dyn_mp_jqm[data-ls="+t+"]").data("stop-actions"),o=!1;if(e){o=-1!==e.split(",").indexOf(a)}return o},addJSEvents:function(){$('.dyn_mp_jqm[data-js-action="leave"]').length&&(_this=this,document.addEventListener("mouseleave",(function(t){_this.showPopup("leave")})))}}),appAspro.marketing.inited||(appAspro.marketing.inited=!0,$(document).ready((function(){BX.addCustomEvent("onMarketingPopupClose",(function(t){if(t){let a=t.hash.w.find(".marketing-popup").data("ls");if(a){appAspro.marketing.checkStopAction(a,"close")&&appAspro.marketing.stopShowAlways(a)}}})),BX.addCustomEvent("onMarketingPopupShow",(function(t){if(t){let s=t.hash;if(" undefined"!=typeof $(s.t).data("ls")&&$(s.t).data("ls")){var a=$(s.t).data("ls"),e=0,o="";if($(s.t).data("ls_timeout")&&(e=$(s.t).data("ls_timeout")),e=e?Date.now()+1e3*e:"","undefined"!=typeof localStorage){var n=localStorage.getItem(a);try{o=JSON.parse(n)}catch(t){o=n}null!=o&&localStorage.removeItem(a),(o={}).VALUE="Y",o.TIMESTAMP=e,$(s.t).data("show_always")&&(o.SHOW_ALWAYS=$(s.t).data("show_always")),localStorage.setItem(a,JSON.stringify(o))}else{(n=$.cookie(a))||$.cookie(a,"Y",{expires:e})}var i=s.w.find(".marketing-popup").data("classes");i&&s.w.addClass(i)}}})),appAspro.marketing.showPopup(),appAspro.marketing.addJSEvents(),void 0!==window.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",(function(t){appAspro.marketing.showPopup(),appAspro.marketing.addJSEvents()}))})),$(document).on("click",".dyn_mp_jqm_frame [data-marketing-action]",(function(t){let a=$(this).closest(".dyn_mp_jqm_frame"),e=$(this).closest(".marketing-popup"),o=e.data("ls"),n=!1,i=$(this).attr("data-marketing-action"),s=a.hasClass("jqm-lock-close");if(n=appAspro.marketing.checkStopAction(o,i),"btn1"===i)s&&(a.removeClass("jqm-lock-close"),n=!0);else{let t=a.find(".marketing-popup-disagree");s&&(e.length&&e.hide(),t.length&&t.removeClass("hidden"),n=!1)}n&&appAspro.marketing.stopShowAlways(o),a.jqmHide()})),$(document).on("click",".coupon-block",(function(t){let a=this.querySelector(".coupon-block__text").textContent.trim();navigator.clipboard&&navigator.clipboard.writeText(a).then((()=>{})).catch((()=>{console.log("error copy")}))})));