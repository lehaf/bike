void 0===window.JCBasketShareNew&&(window.JCBasketShareNew=function(rand,arParams,arResult){this.rand=rand,this.timerCopy=!1,this.params={},this.result={},this.$popup=!1,this.$block=!1,this.$copy=!1,this.$inputUrl=!1,this.$error=!1,"object"==typeof arParams&&(this.params=arParams,this.init())},window.JCBasketShareNew.prototype={init:function(){if(this.$block=$("#basket-share-new-"+this.rand),this.$block.length){this.$popup=this.$block.closest(".popup"),this.bPopup=this.$popup.length>0,this.$copy=this.$block.find(".basket-share-new-copy-url"),this.$inputUrl=this.$block.find(".basket-share-new-url input"),this.$error=this.$block.find(".basket-share-new-error-text");var that=this,waitInterval=setInterval((function(){that.$block.height()&&(clearInterval(waitInterval),"function"==typeof CheckPopupTop&&CheckPopupTop(),that.onResizeHandler())}),100)}this.bindEvents()},bindEvents:function(){var that=this;this.$block.length&&this.bPopup&&$(window).resize((function(){that.onResizeHandler()})),$(document).ready((function(){that.$copy.length&&that.waitClipboardInit(100,(function(){var url=that.$copy.data("clipboard-text");clipboard=new Clipboard(that.$copy[0]),clipboard.on("success",(function(e){let $text=that.$copy.find("span.basket-share-new-url-text");if($text.length){let $iconCopy=that.$copy.find("span.basket-share-new-url-icon i.copy"),$iconCopied=that.$copy.find("span.basket-share-new-url-icon i.copied");$text.text(BX.message("BSN_T_URL_COPIED_HINT")),that.$copy.addClass("copied"),$iconCopy.addClass("hidden"),$iconCopied.removeClass("hidden"),that.timerCopy&&(clearTimeout(that.timerCopy),that.timerCopy=!1),that.timerCopy=setTimeout((function(){$text.text(BX.message("BSN_T_URL_COPY_HINT")),that.$copy.removeClass("copied"),$iconCopy.removeClass("hidden"),$iconCopied.addClass("hidden")}),2e3)}e.clearSelection()})),clipboard.on("error",(function(e){alert(BX.message("BSN_T_URL_COPY_ERROR_HINT"))}))}))}))},onResizeHandler:function(){"function"==typeof CheckPopupTop&&CheckPopupTop(),this.bPopup&&window.matchMedia("(max-width:767px)").matches},waitClipboardInit:function(delay,callback){var that=this;"function"!=typeof Clipboard||"function"!=typeof Clipboard.prototype.on?setTimeout((function(){that.waitClipboardInit(delay,callback)}),delay):"function"==typeof callback&&callback()}});